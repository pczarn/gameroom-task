Owner: <%= tournament.owner.name %>

<h2>Teams</h2>

<% tournament.team_tournaments.each do |team_tournament| %>
  <%= render partial: "teams/display_long", locals: { team: team_tournament.team } %>

  <% if tournament.open? %>
    <% if member_of_team?(team_tournament, current_user) %>
      <%= button_to "Leave team",
                    team_tournament_membership_path(team_tournament),
                    method: :delete %>
    <% elsif !member?(tournament, current_user) %>
      <%= button_to "Join team",
                    team_tournament_membership_index_path(id: team_tournament),
                    method: :post %>
    <% end -%>

    <% if tournament.owned_by?(current_user) %>
      <%= button_to "Remove team from tournament",
                    tournament_remove_team_path(tournament, team_id: team_tournament.team.id),
                    method: :delete %>
    <% end -%>
  <% end %>
<% end %>
